<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>O Nosso Casamento - Convite AR</title>
  
  <!-- Importar A-Frame e MindAR -->
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>
  <!-- Componente Chroma Key (para retirar o fundo verde do vídeo) -->
  <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>
  
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- UI Sobreposta (Interface 2D para RSVP e Formulário) -->
  <div id="ui-container" class="hidden">
    <div id="rsvp-buttons">
      <h2>Vens celebrar connosco?</h2>
      <button id="btn-confirmar">Vou com certeza!</button>
      <button id="btn-rejeitar">Não poderei ir</button>
    </div>

    <!-- Formulário de Logística que aparece após confirmar -->
    <div id="form-logistica" class="hidden">
      <h3>Detalhes da tua presença</h3>
      <input type="text" id="nome" placeholder="O teu nome" required>
      <select id="prato">
        <option value="Carne">Prato de Carne</option>
        <option value="Peixe">Prato de Peixe</option>
        <option value="Vegetariano">Prato Vegetariano</option>
      </select>
      <input type="text" id="alergias" placeholder="Alergias ou restrições?">
      <button id="btn-enviar">Enviar Confirmação</button>
    </div>
  </div>

  <!-- Cena A-Frame com MindAR (Rastreio de Imagem) -->
  <a-scene mindar-image="imageTargetSrc: ./assets/targets.mind; autoStart: true;" color-space="sRGB" renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
    
    <a-assets>
      <!-- O vídeo dos noivos com fundo verde -->
      <video id="holograma" src="./assets/video_casal.mp4" loop crossorigin="anonymous" playsinline></video>
    </a-assets>

    <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

    <!-- O target (quando a imagem do convite é detetada) -->
    <a-entity mindar-image-target="targetIndex: 0" id="convite-target">
      
      <!-- Vídeo Holograma com efeito Chroma Key -->
      <a-video src="#holograma" position="0 0.5 0" height="1" width="1.5" material="shader: chromakey; color: 0.1 0.9 0.2" rotation="0 0 0"></a-video>
      
      <!-- Texto 3D de Boas-vindas -->
      <a-text value="Bem-vindos!" color="#FFFFFF" align="center" position="0 1.2 0"></a-text>

    </a-entity>
  </a-scene>

  <script src="js/app.js"></script>
</body>
</html>
